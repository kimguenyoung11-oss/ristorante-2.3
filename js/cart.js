const CART_KEY="MM_CART_V1";function getCart(){try{return JSON.parse(localStorage.getItem(CART_KEY)||"{}")}catch(e){return{}}}function saveCart(c){localStorage.setItem(CART_KEY,JSON.stringify(c))}function addToCart(id,q){const c=getCart();c[id]=(c[id]||0)+q;saveCart(c);updateCartCount()}function setQty(id,q){const c=getCart();if(q<=0){delete c[id]}else{c[id]=q}saveCart(c);updateCartCount()}function clearCart(){saveCart({});updateCartCount()}function updateCartCount(){const c=getCart();const n=Object.values(c).reduce((a,b)=>a+b,0);document.querySelectorAll("[data-cart-count]").forEach(el=>el.textContent=n)}document.addEventListener("DOMContentLoaded",updateCartCount);